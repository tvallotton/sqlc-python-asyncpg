version: "2"
plugins:
  - name: hello_world
    wasm:
      url: file://./target/wasm32-wasip1/debug/sqlc-python-asyncpg.wasm
      # sha256: 2ea9a7f195f517331d75d1fae65f8f38ee3d6b70f734a3fe086b382a2f66b781

sql:
  - schema: "./schema.sql"
    queries:
      - test/*.sql
    engine: postgresql

    codegen:
      - out: test/query
        plugin: hello_world
        options:
          package: test.query
          use_namespace: true

          types:
            jsonb:
              python_type: dict
              import: import json
              encode: json.dumps
              decode: json.loads
